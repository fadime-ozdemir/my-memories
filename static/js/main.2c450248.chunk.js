(this["webpackJsonpmy-memories"]=this["webpackJsonpmy-memories"]||[]).push([[0],{134:function(e,a,t){e.exports=t.p+"static/media/keep-memories.10c54587.png"},153:function(e,a,t){e.exports=t(192)},158:function(e,a,t){},159:function(e,a,t){},192:function(e,a,t){"use strict";t.r(a);var n=t(0),o=t.n(n),r=t(13),l=t.n(r),c=(t(158),t(12)),i=(t(159),t(29)),m=t(241),u=t(9),s=t(242),d=t(243),p=t(230),f=t(51),g=t(256),E=t(234),b=t(257),h=t(135),v=t(120),y=t.n(v),O=t(105),j=t.n(O),x=t(65),C=t.n(x),k=t(104),w=t.n(k),I=t(56),N=t.n(I),S=t(103),A=t.n(S),M=t(20),D=t(240),F=t(252),z=t(254),T=t(239),R=t(236),L=t(237),P=t(235),B=t(69),W=t.n(B);W.a.initializeApp({apiKey:"AIzaSyA2KSAEEMSU656axPkpDvH4XtkknRWCDiE",authDomain:"my-memories-8ff66.firebaseapp.com",databaseURL:"https://my-memories-8ff66.firebaseio.com",projectId:"my-memories-8ff66",storageBucket:"my-memories-8ff66.appspot.com",messagingSenderId:"589160303203",appId:"1:589160303203:web:b49a66af2f303550634656"});var U=W.a.firestore(),G=W.a.storage(),V=W.a.auth,_=t(17),K=o.a.createContext({user:null,setUser:function(){}});function J(){var e=o.a.useContext(K).user;console.log(e);var a=Object(n.useState)(!1),t=Object(c.a)(a,2),r=t[0],l=t[1],i=Object(n.useState)({name:"",userId:e.uid,creationDate:""}),m=Object(c.a)(i,2),u=m[0],s=m[1],d=function(e){e.preventDefault(),U.collection("Albums").add(u)},f=o.a.useState(!1),g=Object(c.a)(f,2),b=g[0],h=g[1],v=function(){h(!1)};return o.a.createElement("div",null,o.a.createElement(p.a,{"aria-label":"show 17 new notifications",color:"inherit",onClick:function(){h(!0)}},o.a.createElement(E.a,{badgeContent:0,color:"secondary"},o.a.createElement(C.a,null))),o.a.createElement(z.a,{open:b,onClose:v,"aria-labelledby":"form-dialog-title"},o.a.createElement(P.a,{id:"form-dialog-title"},"Add a new album"),o.a.createElement(R.a,null,o.a.createElement(L.a,null,"To create a new collection of memories, please enter a name for your album here."),o.a.createElement(F.a,{autoFocus:!0,margin:"dense",id:"name",label:"Album name",type:"text",fullWidth:!0,onChange:function(e){return function(e){s(Object(M.a)(Object(M.a)({},u),{},{name:e.target.value,creationDate:new Date}))}(e)}})),o.a.createElement(T.a,null,o.a.createElement(D.a,{onClick:v,color:"primary"},"Cancel"),o.a.createElement(D.a,{onClick:function(a){return function(a){v(),d(a),s({name:"",userId:e.uid,creationDate:""}),l(!0)}(a)},color:"primary"},"Add"))),r?o.a.createElement(_.a,{to:"/"}):null)}var H=t(27),X=t(121),q=t.n(X),Q=Object(m.a)((function(e){return{grow:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:Object(i.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),link:{textDecoration:"none",color:"#fff"},search:Object(i.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(u.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(u.c)(e.palette.common.white,.25)},marginRight:e.spacing(2),marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(3),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(i.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:"20ch"}),sectionDesktop:Object(i.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(i.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})}}));function Y(){var e=Q(),a=o.a.useState(null),t=Object(c.a)(a,2),n=t[0],r=t[1],l=o.a.useState(null),i=Object(c.a)(l,2),m=i[0],u=i[1],v=o.a.useContext(K).user,O=Boolean(n),x=Boolean(m),k=Object(_.g)(),I=function(e){r(e.currentTarget)},S=function(){u(null)},M=function(){r(null),S()},D="primary-search-account-menu",F=o.a.createElement(h.a,{anchorEl:n,anchorOrigin:{vertical:"top",horizontal:"right"},id:D,keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:O,onClose:M},o.a.createElement(H.b,{to:"/profile",style:{textDecoration:"none",color:"inherit"}},o.a.createElement(b.a,{onClick:M},"Profile")),o.a.createElement(H.b,{to:"/setting",style:{textDecoration:"none",color:"inherit"}},o.a.createElement(b.a,{onClick:M},"My account")),o.a.createElement(b.a,{onClick:function(){V().signOut().then((function(){console.log(v),k.push("/")})).catch((function(e){console.log("cannot sign out",e)})),M()}},"Log Out")),z=o.a.createElement(h.a,{anchorEl:m,anchorOrigin:{vertical:"top",horizontal:"right"},id:"primary-search-account-menu-mobile",keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:x,onClose:S},o.a.createElement(b.a,null,o.a.createElement(p.a,{"aria-label":"show 4 new mails",color:"inherit"},o.a.createElement(E.a,{color:"secondary"},o.a.createElement(A.a,null))),o.a.createElement("p",null,"Share Board")),o.a.createElement(b.a,null,o.a.createElement(p.a,{"aria-label":"show 4 new mails",color:"inherit"},o.a.createElement(E.a,{color:"secondary"},o.a.createElement(C.a,null))),o.a.createElement("p",null,"Add Board")),o.a.createElement(b.a,null,o.a.createElement(p.a,{"aria-label":"show 11 new notifications",color:"inherit"},o.a.createElement(E.a,{badgeContent:0,color:"secondary"},o.a.createElement(w.a,null))),o.a.createElement("p",null,"Notifications")),o.a.createElement(b.a,{onClick:I},o.a.createElement(p.a,{"aria-label":"account of current user","aria-controls":"primary-search-account-menu","aria-haspopup":"true",color:"inherit"},o.a.createElement(j.a,null)),o.a.createElement("p",null,"Profile")));return o.a.createElement("div",{className:e.grow},o.a.createElement(s.a,{position:"static"},o.a.createElement(d.a,null,o.a.createElement(f.a,{className:e.title,variant:"h6",noWrap:!0}),o.a.createElement(f.a,{className:e.title,variant:"h6",noWrap:!0},o.a.createElement(H.b,{to:"/",className:e.link},"MyMemories")),o.a.createElement("div",{className:e.search},o.a.createElement("div",{className:e.searchIcon},o.a.createElement(y.a,null)),o.a.createElement(g.a,{placeholder:"Search\u2026",classes:{root:e.inputRoot,input:e.inputInput},inputProps:{"aria-label":"search"}})),o.a.createElement("div",{className:e.grow}),o.a.createElement("div",{className:e.sectionDesktop},!!v&&o.a.createElement(o.a.Fragment,null,o.a.createElement(p.a,{"aria-label":"share the board",color:"inherit"},o.a.createElement(E.a,{color:"secondary"},o.a.createElement(A.a,null))),o.a.createElement(J,null),o.a.createElement(p.a,{"aria-label":"show 17 new notifications",color:"inherit"},o.a.createElement(E.a,{badgeContent:0,color:"secondary"},o.a.createElement(w.a,null)))),v?o.a.createElement(p.a,{edge:"end","aria-label":"account of current user","aria-controls":D,"aria-haspopup":"true",onClick:I,color:"inherit"},o.a.createElement(j.a,null)):o.a.createElement(p.a,{edge:"end","aria-label":"account of current user","aria-haspopup":"true",onClick:function(){return k.push("/login")},color:"inherit"},o.a.createElement(q.a,null))),o.a.createElement("div",{className:e.sectionMobile},o.a.createElement(p.a,{"aria-label":"show more","aria-controls":"primary-search-account-menu-mobile","aria-haspopup":"true",onClick:function(e){u(e.currentTarget)},color:"inherit"},o.a.createElement(N.a,null))))),z,F)}var Z=t(45),$=t(247),ee=t(248),ae=t(249),te=t(246),ne=t(6),oe=t(244),re=t(245),le=t(57),ce=t.n(le),ie=t(91),me=t.n(ie);function ue(e){var a=e.albumId,t=e.openEdit,r=e.setOpenEditModal,l=o.a.useContext(K).user;console.log("user in edit modal Album",l);var i=Object(n.useState)(!1),m=Object(c.a)(i,2),u=m[0],s=m[1],d=Object(n.useState)({name:l.name,userId:l.uid,creationDate:""}),p=Object(c.a)(d,2),f=p[0],g=p[1];console.log("user input",f);var E=function(e){e.preventDefault(),U.collection("Albums").doc(a).update(f)},b=function(){r(!1)};return console.log("is open",t),o.a.createElement("div",null,o.a.createElement(z.a,{open:t,onClose:b,"aria-labelledby":"form-dialog-title"},o.a.createElement(P.a,{id:"form-dialog-title"},"Edit album"),o.a.createElement(R.a,null,o.a.createElement(L.a,null,"Please enter a rename for your album here."),o.a.createElement(F.a,{autoFocus:!0,margin:"dense",id:"name",label:"Album name",type:"text",fullWidth:!0,onChange:function(e){return function(e){g(Object(M.a)(Object(M.a)({},f),{},{name:e.target.value,creationDate:new Date}))}(e)}})),o.a.createElement(T.a,null,o.a.createElement(D.a,{onClick:b,color:"primary"},"Cancel"),o.a.createElement(D.a,{onClick:function(e){return function(e){b(),E(e),g({name:"",userId:l.uid,creationDate:""}),s(!0)}(e)},color:"primary"},"Edit"))),u?o.a.createElement(_.a,{to:"/"}):null)}var se=Object(m.a)({settings:{marginLeft:"auto"}}),de=Object(ne.a)({paper:{border:"1px solid #d3d4d5"}})((function(e){return o.a.createElement(h.a,Object.assign({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},e))})),pe=Object(ne.a)((function(e){return{root:{"&:focus":{backgroundColor:e.palette.primary.main,"& .MuiListItemIcon-root, & .MuiListItemText-primary":{color:e.palette.common.white}}}}}))(b.a);function fe(e){var a=e.albumId,t=e.album,n=o.a.useState(null),r=Object(c.a)(n,2),l=r[0],i=r[1],m=se(),u=function(){i(null)},s=o.a.useState(!1),d=Object(c.a)(s,2),f=d[0],g=d[1];return o.a.createElement("div",{className:m.settings},o.a.createElement(p.a,{"aria-controls":"customized-menu","aria-haspopup":"true",variant:"contained","aria-label":"settings",edge:"end",size:"small",onClick:function(e){i(e.currentTarget)}},o.a.createElement(N.a,{fontSize:"small"})),o.a.createElement(de,{id:"customized-menu",anchorEl:l,keepMounted:!0,open:Boolean(l),onClose:u},o.a.createElement(pe,{onClick:function(){g(!0)}},o.a.createElement(oe.a,null,o.a.createElement(me.a,{fontSize:"small"})),o.a.createElement(re.a,{primary:"Edit"})),o.a.createElement(pe,{onClick:function(){U.collection("Albums").doc(a).delete().then((function(){console.log("Album successfully deleted!")})).catch((function(e){console.error("Error removing document: ",e)})),u()}},o.a.createElement(oe.a,null,o.a.createElement(ce.a,{fontSize:"small"})),o.a.createElement(re.a,{primary:"Delete"}))),o.a.createElement(ue,{album:t,albumId:a,openEdit:f,setOpenEditModal:g}))}var ge=Object(m.a)({root:{minWidth:275,backgroundColor:"#caf0ff"},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12},link:{textDecoration:"none",color:"#000"},settings:{marginLeft:"auto"},header:{paddingBottom:"0"},content:{paddingTop:"0"}});function Ee(e){var a=e.album,t=ge();return o.a.createElement(te.a,{item:!0,xs:3},o.a.createElement($.a,{className:t.root},o.a.createElement(ee.a,{disableSpacing:!0,className:t.header},o.a.createElement(fe,{albumId:a.id,album:a})),o.a.createElement(ae.a,{className:t.content},o.a.createElement(H.b,{to:"/albums/"+a.id,className:t.link},o.a.createElement(f.a,{variant:"h5",component:"h2"},a.data.name)))))}var be=Object(m.a)((function(e){return{root:{flexGrow:1,marginTop:"20px"},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary}}}));function he(e){var a=e.albums,t=be();return o.a.createElement("div",{className:t.root},a?o.a.createElement(te.a,{container:!0,spacing:3},a.map((function(e){return o.a.createElement(Ee,{album:e,key:e.id})}))):null)}function ve(){var e=Object(n.useState)([]),a=Object(c.a)(e,2),t=a[0],r=a[1],l=o.a.useContext(K).user;return Object(n.useEffect)((function(){U.collection("Albums").onSnapshot((function(e){e.docChanges().forEach((function(e){var a=e.doc.data().userId;if("added"===e.type&&a===l.uid){var t={id:e.doc.id,data:e.doc.data()};r((function(e){return[].concat(Object(Z.a)(e),[t])}))}if("modified"===e.type&&a===l.uid){var n={id:e.doc.id,data:e.doc.data()};r((function(a){var t=Object(Z.a)(a),o=t.findIndex((function(a){return a.id===e.doc.id}));return t.splice(o,1,n),t}))}if("removed"===e.type&&a===l.uid){var o=e.doc.id;r((function(a){console.log(e.doc.data());var t=Object(Z.a)(a);return t=t.filter((function(e){return e.id!==o}))})),console.log("Album is removed !")}}))}))}),[]),o.a.createElement(he,{albums:t})}var ye=t(122);function Oe(e){var a=e.uiConfig;return o.a.createElement("div",{style:{textAlign:"center"}},o.a.createElement("h2",{className:"title"},"Sign In/Up"),o.a.createElement(ye.FirebaseAuth,{uiConfig:a,firebaseAuth:V()}))}var je=t(106),xe=t.n(je),Ce=t(124),ke=t(250),we=t(93),Ie=t(133),Ne=t.n(Ie),Se=t(92),Ae=Object(m.a)((function(e){return{root:{flexGrow:1,alignItems:"stretch",height:"2rem",display:"flex",fontSize:"1.2rem",justifyContent:"space-between"},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},link:{display:"flex"},icon:{marginRight:e.spacing(.5),width:20,height:20},add:{alignContent:"center",cursor:"pointer"}}}));function Me(e){var a=e.memory,t=e.albumId,n=e.openEdit,r=e.setOpenEditModal,l=Ae(),m=a.data.imageName,u=o.a.useState(a.data),s=Object(c.a)(u,2),d=s[0],p=s[1],f=function(e){var a=e.target.id,t=e.target.value;p((function(e){return Object(M.a)(Object(M.a)({},e),{},Object(i.a)({},a,t))}))},g=function(){r(!1)},E=function(e){var n=e.imageFile,o=Math.floor(1e6*Math.random()+1)+"-"+n.name;G.ref("images/".concat(o)).put(n).on("state_changed",(function(e){var a=Math.round(e.bytesTransferred/e.totalBytes*100);console.log("progress",a)}),(function(e){console.log(e)}),(function(){b(m),G.ref("images").child(o).getDownloadURL().then((function(n){U.collection("Albums").doc(t).collection("Memories").doc(a.id).update({date:e.date,location:e.location,words:e.words,imageFile:n,imageName:o})}))}))},b=function(e){G.ref("images/".concat(e)).delete().then((function(){console.log("image "+e+" deleted successfully")})).catch((function(e){console.log("Uh-oh, an error occurred while deleting the image",e)}))};return o.a.createElement("div",{className:l.root},o.a.createElement(z.a,{open:n,onClose:g,"aria-labelledby":"form-dialog-title"},o.a.createElement(P.a,{id:"form-dialog-title"},"Edit Memory"),o.a.createElement(R.a,null,o.a.createElement(F.a,{multiline:!0,autoFocus:!0,fullWidth:!0,id:"words",name:"words",label:"Some Words",type:"text",value:d.words,onChange:f}),o.a.createElement(F.a,{label:"Location",id:"location",name:"location",defaultValue:"",className:l.textField,helperText:"The place of this memory",margin:"dense",value:d.location,onChange:f}),o.a.createElement(F.a,{label:" ",type:"date",id:"date",name:"date",defaultValue:"",className:l.textField,helperText:"The date of this memory",margin:"dense",value:d.date,onChange:f}),o.a.createElement(Se.a,{acceptedFiles:["image/*"],dropzoneText:"Drag and drop an image here or click",filesLimit:1,value:d.imageFile,onChange:function(e){return p((function(a){return Object(M.a)(Object(M.a)({},a),{},{imageFile:e[0]})}))}})),o.a.createElement(T.a,null,o.a.createElement(D.a,{onClick:g,color:"primary"},"Cancel"),o.a.createElement(D.a,{onClick:function(){void 0===d.imageFile?U.collection("Albums").doc(t).collection("Memories").doc(a.id).update({date:d.date,location:d.location,words:d.words}):d.imageFile&&E(d),r(!1)},color:"primary"},"Edit"))))}var De=Object(m.a)({settings:{marginLeft:"auto"}}),Fe=Object(ne.a)({paper:{border:"1px solid #d3d4d5"}})((function(e){return o.a.createElement(h.a,Object.assign({elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"center",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},e))})),ze=Object(ne.a)((function(e){return{root:{"&:focus":{backgroundColor:e.palette.primary.main,"& .MuiListItemIcon-root, & .MuiListItemText-primary":{color:e.palette.common.white}}}}}))(b.a);function Te(e){var a=e.memory,t=e.albumId,n=o.a.useState(null),r=Object(c.a)(n,2),l=r[0],i=r[1],m=De(),u=function(){i(null)},s=o.a.useState(!1),d=Object(c.a)(s,2),f=d[0],g=d[1];return o.a.createElement("div",{className:m.settings},o.a.createElement(p.a,{"aria-controls":"customized-menu","aria-haspopup":"true",variant:"contained","aria-label":"settings",onClick:function(e){i(e.currentTarget)}},o.a.createElement(N.a,null)),o.a.createElement(Fe,{id:"customized-menu",anchorEl:l,keepMounted:!0,open:Boolean(l),onClose:u},o.a.createElement(ze,{className:m.add,onClick:function(){g(!0),u()}},o.a.createElement(oe.a,null,o.a.createElement(me.a,{fontSize:"small"})),o.a.createElement(re.a,{primary:"Edit"})),o.a.createElement(ze,{onClick:function(){U.collection("Albums").doc(t).collection("Memories").doc(a.id).delete().then((function(){G.ref("images/".concat(a.data.imageName)).delete().then((function(){console.log("image deleted successfully")})).catch((function(e){console.log("Uh-oh, an error occurred while deleting the image",e)})),console.log("Document successfully deleted!")})).catch((function(e){console.error("Error removing document: ",e)})),u()}},o.a.createElement(oe.a,null,o.a.createElement(ce.a,{fontSize:"small"})),o.a.createElement(re.a,{primary:"Delete"}))),o.a.createElement(Me,{memory:a,albumId:t,openEdit:f,setOpenEditModal:g}))}var Re=Object(m.a)((function(e){return{root:{maxWidth:345},media:{height:0,paddingTop:"56.25%"},settings:{marginLeft:"auto"},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:we.a[500]},caption:{marginRight:"8px"}}}));function Le(e){var a=e.memory,t=e.albumId,n=e.handleClickOpen,r=Re();return o.a.createElement(te.a,{item:!0,xs:3},o.a.createElement($.a,{className:r.root},o.a.createElement(ke.a,{className:r.media,image:a.data.imageFile?a.data.imageFile:"https://images.theconversation.com/files/250919/original/file-20181217-185258-1gc7soo.jpg",title:"Paella dish"}),o.a.createElement(ae.a,null,o.a.createElement(f.a,{variant:"body2",color:"textSecondary",component:"p"},a.data.words)),o.a.createElement(ee.a,{disableSpacing:!0},o.a.createElement(p.a,{"aria-label":"add to favorites"},o.a.createElement(Ne.a,null)),o.a.createElement(f.a,{className:r.caption,variant:"caption",color:"textSecondary",component:"p"},a.data.location),o.a.createElement(f.a,{className:r.caption,variant:"caption",color:"textSecondary",component:"p"},a.data.date),o.a.createElement(Te,{memory:a,albumId:t,handleClickOpen:n}))))}var Pe=t(255),Be=t(251),We=t(97),Ue=t.n(We),Ge=t(98),Ve=t.n(Ge),_e=t(99),Ke=t.n(_e),Je=Object(m.a)((function(e){return{root:{flexGrow:1,alignItems:"stretch",height:"2rem",display:"flex",fontSize:"1.2rem",justifyContent:"space-between"},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},link:{display:"flex"},icon:{marginRight:e.spacing(.5),width:20,height:20},add:{alignContent:"center",cursor:"pointer"}}})),He={words:null,location:null,date:null,imageFile:null};function Xe(e){var a=e.albumName,t=e.submitData,n=Je(),r=o.a.useState(He),l=Object(c.a)(r,2),m=l[0],u=l[1],s=function(e){var a=e.target.id,t=e.target.value;u((function(e){return Object(M.a)(Object(M.a)({},e),{},Object(i.a)({},a,t))}))},d=o.a.useState(!1),p=Object(c.a)(d,2),g=p[0],E=p[1],b=function(){E(!1)};return o.a.createElement("div",{className:n.root},o.a.createElement(Pe.a,{"aria-label":"breadcrumb",separator:"|"},o.a.createElement(Be.a,{color:"inherit",href:"/albums",className:n.link},o.a.createElement(Ue.a,{className:n.icon}),"Albums"),o.a.createElement(f.a,{color:"textPrimary",className:n.link},o.a.createElement(Ve.a,{className:n.icon}),a)),o.a.createElement(f.a,{color:"textPrimary",className:n.add,onClick:function(){E(!0)}},o.a.createElement(Ke.a,{className:n.icon}),"Add Memory"),o.a.createElement(z.a,{open:g,onClose:b,"aria-labelledby":"form-dialog-title"},o.a.createElement(P.a,{id:"form-dialog-title"},"New Memory"),o.a.createElement(R.a,null,o.a.createElement(F.a,{multiline:!0,autoFocus:!0,fullWidth:!0,id:"words",name:"words",label:"Some Words",type:"text",value:m.words,onChange:s}),o.a.createElement(F.a,{label:"Location",id:"location",name:"location",defaultValue:"",className:n.textField,helperText:"The place of this memory",margin:"dense",value:m.location,onChange:s}),o.a.createElement(F.a,{label:" ",type:"date",id:"date",name:"date",defaultValue:"",className:n.textField,helperText:"The date of this memory",margin:"dense",value:m.date,onChange:s}),o.a.createElement(Se.a,{acceptedFiles:["image/*"],dropzoneText:"Drag and drop an image here or click",filesLimit:1,onChange:function(e){return u((function(a){return Object(M.a)(Object(M.a)({},a),{},{imageFile:e[0]})}))}})),o.a.createElement(T.a,null,o.a.createElement(D.a,{onClick:b,color:"primary"},"Cancel"),o.a.createElement(D.a,{onClick:function(){t(m),u(He),E(!1)},color:"primary"},"Add"))))}var qe=Object(m.a)((function(e){return{root:{flexGrow:1}}}));function Qe(e){var a=e.memories,t=e.albumName,n=e.albumId,r=e.setMemories,l=qe(),i=function(e){var a=e.imageFile,t=Math.floor(1e6*Math.random()+1)+"-"+a.name;G.ref("images/".concat(t)).put(a).on("state_changed",(function(e){var a=Math.round(e.bytesTransferred/e.totalBytes*100);console.log("progress",a)}),(function(e){console.log(e)}),(function(){G.ref("images").child(t).getDownloadURL().then((function(a){U.collection("Albums").doc(n).collection("Memories").add(Object(M.a)(Object(M.a)({},e),{},{imageFile:a,imageName:t})),console.log("url",a)}))}))},m=o.a.useState(!1),u=Object(c.a)(m,2),s=(u[0],u[1]),d=function(){s(!0)};return o.a.createElement("div",{className:l.root},o.a.createElement(Xe,{albumName:t,submitData:function(e){i(e)}}),a&&a.length>0?o.a.createElement(te.a,{container:!0,spacing:3},a.map((function(e){return o.a.createElement(Le,{memory:e,key:e.id,albumId:n,setMemories:r,handleClickOpen:d})}))):null)}function Ye(){var e=Object(n.useState)([]),a=Object(c.a)(e,2),t=a[0],r=a[1],l=Object(n.useState)(""),i=Object(c.a)(l,2),m=i[0],u=i[1],s=function(){var e=Object(Ce.a)(xe.a.mark((function e(){var a;return xe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.collection("Albums").doc(d).get();case 2:a=e.sent,u(a.data());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){s()}),[]);var d=Object(_.h)().albumId;return Object(n.useEffect)((function(){U.collection("Albums").doc(d).collection("Memories").onSnapshot((function(e){e.docChanges().forEach((function(e){if("added"===e.type){var a={id:e.doc.id,data:e.doc.data()};r((function(e){return[].concat(Object(Z.a)(e),[a])}))}if("modified"===e.type){var t={id:e.doc.id,data:e.doc.data()};r((function(a){var n=Object(Z.a)(a),o=n.findIndex((function(a){return a.id===e.doc.id}));return n.splice(o,1,t),n}))}if("removed"===e.type){var n=e.doc.id;r((function(e){var a=Object(Z.a)(e);return a=a.filter((function(e){return e.id!==n}))})),console.log("something is removed !")}}))}))}),[]),o.a.createElement(Qe,{memories:t,albumName:m?m.name:null,albumId:d,setMemories:r})}function Ze(e){return o.a.createElement("div",null,o.a.createElement("h2",null,"UserName"))}var $e=t(134),ea=t.n($e),aa=Object(m.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary,height:"calc(100vh - 64px)",paddingLeft:"60px",marginTop:"15%"},mainImage:{height:"calc(100vh - 64px)",backgroundImage:"url(".concat(ea.a,")"),backgroundSize:"contain",backgroundRepeat:"no-repeat"},text:{margin:"20px 0"}}}));function ta(){var e=aa(),a=Object(_.g)();return o.a.createElement("div",{className:e.root},o.a.createElement(te.a,{container:!0,spacing:3},o.a.createElement(te.a,{item:!0,className:e.paper,xs:6},o.a.createElement(f.a,{variant:"h2",component:"h2"},"Keep your Memories"),o.a.createElement(f.a,{variant:"body1",component:"h2",className:e.text},"Save your memories in a safe place and share them with others."),o.a.createElement(D.a,{variant:"contained",color:"primary",onClick:function(){return a.push("/login")}},"Start for Free")),o.a.createElement(te.a,{item:!0,className:e.mainImage,xs:6})))}var na={signInFlow:"popup",signInOptions:[V.GoogleAuthProvider.PROVIDER_ID,V.FacebookAuthProvider.PROVIDER_ID,V.EmailAuthProvider.PROVIDER_ID],callbacks:{signInSuccessWithAuthResult:function(){return!1}}};var oa=function(){var e=o.a.useState(null),a=Object(c.a)(e,2),t=a[0],n=a[1];return console.log("first",t),o.a.useEffect((function(){V().onAuthStateChanged((function(e){n(e),console.log("app use effct",e)}))}),[]),o.a.createElement(K.Provider,{value:{user:t,setUser:n}},o.a.createElement(H.a,null,o.a.createElement("div",{className:"App"},o.a.createElement(Y,null),o.a.createElement(_.d,null,o.a.createElement(_.b,{exact:!0,path:"/login"},t?o.a.createElement(_.a,{to:"/albums"}):o.a.createElement(Oe,{uiConfig:na})),o.a.createElement(_.b,{exact:!0,path:"/profile"},o.a.createElement(Ze,null)),o.a.createElement(_.b,{exact:!0,path:"/albums"},t?o.a.createElement(ve,null):o.a.createElement(_.a,{to:"/login"})),o.a.createElement(_.b,{exact:!0,path:"/albums/:albumId"},o.a.createElement(Ye,null)),o.a.createElement(_.b,{exact:!0,path:"/"},t?o.a.createElement(_.a,{to:"/albums"}):o.a.createElement(ta,null))))))};l.a.render(o.a.createElement(oa,null),document.getElementById("root"))}},[[153,1,2]]]);
//# sourceMappingURL=main.2c450248.chunk.js.map